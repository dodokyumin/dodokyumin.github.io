# 폼 태그

pojo = 자바bean



method post 는 

request객체 안에 body에 들어있어서 주소창에 키(파라미터)가 보이지 않는다.



노출해도 되면 get

숨기고 싶으면 post



상품을 입력하는 웹페이지는 대부분  post로 숨겨서 넣는다.

sql injection(sql 삽입) : 가장 일반적이고 잘 알려진 코드

~~why? 상품 입력 하는 웹페이지는 DB에 접속하는데 sql injection(sql 삽입) 공격이 이루어질 수 있기 때문.~~

```sql
SELECT * FROM Users WHERE UserId = 105 OR 1=1;
```

모든 유저 정보를 탈취하게 된다.



이러한 오차범위는 프레임워크가 막아준다.











```java
//이 레파지토리를 만들었을 때 위에 계속 만들지 말고 만들었던거를(static을 통해 이미 올린 후) 재사용하자.
    public static ProductRepository getInstance() {
        return instance;
    }
```

 static으로 최초로 생성이 된 instance를 가져오기 때문에,

서버가 살아서 죽을 때까지(사라지지 않는) 객체가 된다.

그럼 아래 bean 코드는 쓸 필요가 없다. 아래 코드의 스코프는 session.

```jsp

<jsp:useBean id="repository"
	class="com.webmarket.data.ProductRepository" scope="session"></jsp:useBean>
```



이렇게 변경.(싱글턴 패턴 굉장히 중요!!)

1. static 인스턴스 준비
2. static 메서드로 인스턴스 리턴 (getInstance() 이름을 주로 씀)
3. 생성자 막기 (private)

```jsp
<%
					ProductRepository repository = ProductRepository.getInstance();
					List<Product> products = repository.getAllProducts();
					for(int i = 0; i < products.size(); i++){
						Product product = products.get(i);
				%>
```

이러면 새로 add를 해도 기존의 아이템들만 가져오기 때문에.

생성자를 private으로 바꿔주어 제한을 걸어줘야한다.

```java
//여기 생성자를 public에서 private으로 바꿔주기.
private ProductRepository() {
        Product phone = new Product("P1234", "iPhone 6s", 800000);
        phone.setDescription("4.7-inch, 1334x750 Retina HD display");
        phone.setCategory("Smart Phone");
        phone.setManufacturer("Apple");
        phone.setUnitsInStock(1000);
        phone.setCondition("New");

        Product notebook = new Product("P1235", "LG PC 그램", 1500000);
        notebook.setDescription("4.7-inch, 1334x750 Retina HD display");
        notebook.setCategory("Smart Phone");
        notebook.setManufacturer("Apple");
        notebook.setUnitsInStock(1000);
        notebook.setCondition("Refubished");

        Product tablet = new Product("P1236", "Galaxy Tab S", 900000);
        tablet.setDescription("4.7-inch, 1334x750 Retina HD display");
        tablet.setCategory("Smart Phone");
        tablet.setManufacturer("Apple");
        tablet.setUnitsInStock(1000);
        tablet.setCondition("Old");

        products.add(phone);
        products.add(notebook);
        products.add(tablet);
    }
```





## 소프트웨어의 디자인 패턴

싱글턴 패턴

